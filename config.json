{
  "rag": {
    "document_processing": {
      "remove_headers": true,
      "remove_citations": true,
      "extract_sections": false
    },
    "chunking": {
      "strategy": "semantic",
      "chunk_size": 384,
      "chunk_overlap": 96,
      "min_chunk_size": 128
    },
    "embedding": {
      "model_name": "sentence-transformers/all-MiniLM-L6-v2",
      "device": "cuda",
      "batch_size": 32,
      "normalize": true
    },
    "retrieval": {
      "top_k": 5,
      "similarity_threshold": 0.65,
      "rerank": true,
      "diversity_penalty": 0.15
    },
    "generation": {
      "max_new_tokens": 64,
      "temperature": 0.0,
      "top_p": 1.0,
      "do_sample": false,
      "repetition_penalty": 1.2,
      "use_chat_template": true
    },
    "vector_store": {
      "collection_name": "rag_documents",
      "persist_directory": "./vector_db"
    }
  },
  "model": {
    "model_path": "meta-llama/Llama-2-7b-chat-hf",
    "model_type": "instruct",
    "interface_type": "huggingface",
    "quantization": null,
    "torch_dtype": "float16",
    "device_map": "auto",
    "trust_remote_code": false
  },
  "evaluation": {
    "compare_no_rag": true,
    "efficiency": {
      "num_warmup": 3,
      "num_runs": 10,
      "max_new_tokens": 128,
      "prompts": [
        "The capital of France is",
        "Artificial intelligence is defined as",
        "The main benefit of renewable energy sources is",
        "In machine learning, the term 'overfitting' refers to",
        "Quantum computing differs from classical computing because",
        "The theory of relativity states that",
        "Neural networks are computational models inspired by",
        "Climate change is primarily caused by"
      ],
      "measure_prefill_decode": true,
      "measure_batch_throughput": false,
      "batch_sizes": [1, 2, 4, 8],
      "estimate_kv_cache": true,
      "baseline_results_path": null
    },
    "performance": {
      "perplexity": {
        "enabled": true,
        "dataset": "wikitext",
        "dataset_config": "wikitext-2-raw-v1",
        "split": "test",
        "num_samples": 100,
        "max_length": 512,
        "stride": null,
        "batch_size": 1
      },
      "lm_eval": {
        "enabled": false,
        "batch_size": 1,
        "tasks": {
          "hellaswag": {
            "enabled": false,
            "num_fewshot": 0,
            "limit": null,
            "description": "Commonsense reasoning - sentence completion"
          },
          "winogrande": {
            "enabled": false,
            "num_fewshot": 0,
            "limit": null,
            "description": "Commonsense reasoning - pronoun resolution"
          },
          "piqa": {
            "enabled": false,
            "num_fewshot": 0,
            "limit": null,
            "description": "Commonsense reasoning - physical interactions"
          }
        }
      }
    },
    "retrieval": {
      "measure_retrieval_quality": true,
      "measure_context_quality": true,
      "measure_answer_quality": true,
      "compare_no_rag": true,
      "k_values": [1, 3, 5, 10],
      "relevance_token_threshold": 0.3,
      "sufficiency_token_threshold": 0.8,
      "ndcg_gain_type": "exponential",
      "normalize_whitespace": true,
      "case_sensitive": false,
      "remove_punctuation": false,
      "faithfulness_method": "token_containment",
      "relevance_method": "token_overlap",
      "rouge_use_stemmer": true,
      "bertscore_lang": "en",
      "bertscore_model": null,
      "dataset_path": null,
      "use_custom_dataset": false
    },
    "output_dir": "./results",
    "save_predictions": true,
    "save_metrics": true
  }
}
